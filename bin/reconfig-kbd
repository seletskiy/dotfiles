#!/bin/bash

export XAUTHORITY=/home/s.seletskiy/.Xauthority
export DISPLAY=${DISPLAY:-:0.0}

xset r rate $DOTFILES_RDELAY $DOTFILES_RRATE

setxkbmap \
    -keycodes \
        "evdev+aliases(qwerty)" \
    -symbols $(echo \
        "pc+us+ru:2"`             # common layout settings`\
        "level3(lwin_switch)"`    # use win as lvl3 modifier`\
        "mod4-lvl3"`              # use lvl3 as mod4`\
        "hjkl-ru"`                # map mod3+hjkl to arrow keys`\
        "terminate(ctrl_alt_bksp)`# terminate X on ctrl+alt+bs`"\
        "capslock(escape)"`       # use capslock as esc`\
        "altwin(swap_alt_win)"`   # swap alt and win`\
        "shift-shift"`            # use lshift+rshift/rshift+lshift for layout switch`\
        "esc-first-group"`        # escape always will switch to main layout`\
        | sed 's/ /+/g') \
    -compat \
        "complete+hjkl"
